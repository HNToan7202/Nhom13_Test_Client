{"ast":null,"code":"import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nvar ESC = KeyCode.ESC,\n  TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n    setTriggerVisible = _ref.setTriggerVisible,\n    triggerRef = _ref.triggerRef,\n    menuRef = _ref.menuRef,\n    menuClassName = _ref.menuClassName,\n    onVisibleChange = _ref.onVisibleChange;\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      if (triggerRef.current.triggerRef.current) {\n        triggerRef.current.triggerRef.current.focus();\n      }\n      setTriggerVisible(false);\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n      case TAB:\n        handleCloseMenuAndReturnFocus();\n        break;\n    }\n  };\n  var focusOpenedMenu = function focusOpenedMenu() {\n    if (menuRef.current) {\n      var _menuRef$current$clas, _menuRef$current$quer, _menuRef$current;\n      var menuList = ((_menuRef$current$clas = menuRef.current.className) === null || _menuRef$current$clas === void 0 ? void 0 : _menuRef$current$clas.includes(menuClassName)) ? menuRef.current : (_menuRef$current$quer = (_menuRef$current = menuRef.current).querySelector) === null || _menuRef$current$quer === void 0 ? void 0 : _menuRef$current$quer.call(_menuRef$current, menuClassName);\n      if (menuList) {\n        menuList['focus'](); // eslint-disable-line @typescript-eslint/dot-notation\n      }\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      setTimeout(function () {\n        focusOpenedMenu();\n        window.addEventListener('keydown', handleKeyDown);\n      }, 100);\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n    return function () {\n      return null;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var returnFocus = function returnFocus() {\n    if (visible && triggerRef.current) {\n      if (triggerRef.current.triggerRef.current) {\n        setTimeout(function () {\n          var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2;\n          (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : _triggerRef$current$t2.focus();\n        }, 100);\n      }\n    }\n  };\n  return {\n    returnFocus: returnFocus\n  };\n}","map":{"version":3,"names":["React","KeyCode","ESC","TAB","useAccessibility","_ref","visible","setTriggerVisible","triggerRef","menuRef","menuClassName","onVisibleChange","handleCloseMenuAndReturnFocus","current","focus","handleKeyDown","event","keyCode","focusOpenedMenu","_menuRef$current$clas","_menuRef$current$quer","_menuRef$current","menuList","className","includes","querySelector","call","useEffect","setTimeout","window","addEventListener","removeEventListener","returnFocus","_triggerRef$current","_triggerRef$current$t","_triggerRef$current$t2"],"sources":["/Users/hoangtoannguyen/HCMUTE/CCPTPM/Documents/video-editing/client/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      menuRef = _ref.menuRef,\n      menuClassName = _ref.menuClassName,\n      onVisibleChange = _ref.onVisibleChange;\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      if (triggerRef.current.triggerRef.current) {\n        triggerRef.current.triggerRef.current.focus();\n      }\n\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        handleCloseMenuAndReturnFocus();\n        break;\n    }\n  };\n\n  var focusOpenedMenu = function focusOpenedMenu() {\n    if (menuRef.current) {\n      var _menuRef$current$clas, _menuRef$current$quer, _menuRef$current;\n\n      var menuList = ((_menuRef$current$clas = menuRef.current.className) === null || _menuRef$current$clas === void 0 ? void 0 : _menuRef$current$clas.includes(menuClassName)) ? menuRef.current : (_menuRef$current$quer = (_menuRef$current = menuRef.current).querySelector) === null || _menuRef$current$quer === void 0 ? void 0 : _menuRef$current$quer.call(_menuRef$current, menuClassName);\n\n      if (menuList) {\n        menuList['focus'](); // eslint-disable-line @typescript-eslint/dot-notation\n      }\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      setTimeout(function () {\n        focusOpenedMenu();\n        window.addEventListener('keydown', handleKeyDown);\n      }, 100);\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n      };\n    }\n\n    return function () {\n      return null;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var returnFocus = function returnFocus() {\n    if (visible && triggerRef.current) {\n      if (triggerRef.current.triggerRef.current) {\n        setTimeout(function () {\n          var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2;\n\n          (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : _triggerRef$current$t2.focus();\n        }, 100);\n      }\n    }\n  };\n\n  return {\n    returnFocus: returnFocus\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}